{% extends 'base.html.twig' %}

{% block title %}Messagerie{% endblock %}
{% block bg%} {{ asset('front/assets/img/notif.png') }}  {% endblock %}
{% block head %}
    <link href="{{ asset('//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css') }}" rel="stylesheet" id="bootstrap-css">
    <script src="{{ asset('//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js') }}"></script>
    <script src="{{ asset('//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js') }}"></script>
{% endblock %}
{% block content %}


    <div class="container">
        <div class="messaging">
            <div class="inbox_msg">
                <div class="inbox_people">
                    <div class="headind_srch">
                        <div class="recent_heading">
                            <h4>Recent</h4>
                        </div>
                        <div class="srch_bar">
                            <div class="stylish-input-group">
                                <input type="text" class="search-bar"  placeholder="Search" >
                                <span class="input-group-addon">
                <button type="button"> <i class="fa fa-search" aria-hidden="true"></i> </button>
                </span> </div>
                        </div>
                    </div>
                    <div class="inbox_chat">
                        {% for message in louled %}
                            <div class="chat_list active_chat">
                                <a href="{{ path("msg_send" , {id: message.sender.id}) }}"> <div class="chat_people">
                                        <div class="chat_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
                                        <div class="chat_ib">
                                            <h5>{{ message.sender.nom }} <span class="chat_date">{{ message.createdat | date }}</span></h5>
                                            <p>{{ message.message }}</p>
                                        </div>
                                    </div></a>
                            </div>
                        {% endfor %}
                    </div>
                </div>


                <div class="mesgs">
                    <div class="msg_history">
                        {% for msg in messages %}
                            {% if msg.sender.id != app.user.id %}
                                <div class="incoming_msg">
                                    <div class="incoming_msg_img"> <img src="https://ptetutorials.com/images/user-profile.png" alt="sunil"> </div>
                                    <div class="received_msg">
                                        <div class="received_withd_msg">
                                            <p>{{ msg.message }}</p>
                                        </div>
                                    </div>
                                </div>
                            {% else %}

                                <div class="outgoing_msg">
                                    <div class="sent_msg" >
                                        <p>{{ msg.message }}</p>
                                    </div>
                                </div>
                            {% endif %}
                        {% endfor %}
                        <span class="js-msg"></span>
                    </div>
                    <div class="type_msg">
                        <div class="input_msg_write">
                            {{ form_start(messForm) }}
                            {{ form_row(messForm._token) }}
                            {{ form_widget(messForm.message) }}
                            <i class="fa fa-paper-plane-o" aria-hidden="true" style="width: 30px"></i>
                            <button href="{{ path("msg_send" , {id:8}) }}">azeaze</button>
                            {{ form_end(messForm, {'render_rest': false}) }}
                        </div>
                    </div>
                </div>
            </div>


        </div></div>


    {% block javascript %}
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        const num = 10
    </script>
    {% endblock %}

{% endblock %}
